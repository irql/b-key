\hypertarget{memory_8h}{}\section{memory.\+h File Reference}
\label{memory_8h}\index{memory.\+h@{memory.\+h}}


Methods and wrappers for allocating or freeing system memory.  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
unsigned char $\ast$ \mbox{\hyperlink{memory_8h_ae6b607822bb47c0cfb4e3cc697265f14}{memory\+\_\+page\+\_\+alloc}} (struct \mbox{\hyperlink{structmain__context}{main\+\_\+context}} $\ast$\mbox{\hyperlink{structmain__context}{main\+\_\+context}}, int page\+\_\+count)
\begin{DoxyCompactList}\small\item\em Allocate a number of system pages using mmap() \end{DoxyCompactList}\item 
unsigned char $\ast$ \mbox{\hyperlink{memory_8h_afa7555fcfe64372a37875ffb68d418c8}{memory\+\_\+page\+\_\+realloc}} (struct \mbox{\hyperlink{structmain__context}{main\+\_\+context}} $\ast$\mbox{\hyperlink{structmain__context}{main\+\_\+context}}, unsigned char $\ast$offset, int old\+\_\+page\+\_\+count, int page\+\_\+count)
\begin{DoxyCompactList}\small\item\em Reallocate a region allocated by \mbox{\hyperlink{memory_8h_ae6b607822bb47c0cfb4e3cc697265f14}{memory\+\_\+page\+\_\+alloc()}} \end{DoxyCompactList}\item 
int \mbox{\hyperlink{memory_8h_a68b9fe986777bee97ccfe01a7e421060}{memory\+\_\+page\+\_\+free}} (struct \mbox{\hyperlink{structmain__context}{main\+\_\+context}} $\ast$\mbox{\hyperlink{structmain__context}{main\+\_\+context}}, unsigned char $\ast$region, int page\+\_\+count)
\begin{DoxyCompactList}\small\item\em Free a region allocated by \mbox{\hyperlink{memory_8h_ae6b607822bb47c0cfb4e3cc697265f14}{memory\+\_\+page\+\_\+alloc()}} \end{DoxyCompactList}\item 
unsigned char $\ast$ \mbox{\hyperlink{memory_8h_a8636b9008fa5840103c6ddf168c5dd61}{memory\+\_\+alloc}} (int amount)
\begin{DoxyCompactList}\small\item\em Allocate using stdlib. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{memory_8h_ae7cde6d85e696f5c9d40ad95c644669f}{memory\+\_\+free}} (void $\ast$record)
\begin{DoxyCompactList}\small\item\em Free a region allocated using \mbox{\hyperlink{memory_8h_a8636b9008fa5840103c6ddf168c5dd61}{memory\+\_\+alloc()}} \end{DoxyCompactList}\item 
unsigned char $\ast$ \mbox{\hyperlink{memory_8h_a25d3abaea079ae74d3b8d19da56a30a5}{memory\+\_\+realloc}} (void $\ast$region, int old\+\_\+amount, int new\+\_\+amount)
\begin{DoxyCompactList}\small\item\em Reallocate a region allocated using \mbox{\hyperlink{memory_8h_a8636b9008fa5840103c6ddf168c5dd61}{memory\+\_\+alloc()}} \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Methods and wrappers for allocating or freeing system memory. 



\subsection{Function Documentation}
\mbox{\Hypertarget{memory_8h_a8636b9008fa5840103c6ddf168c5dd61}\label{memory_8h_a8636b9008fa5840103c6ddf168c5dd61}} 
\index{memory.\+h@{memory.\+h}!memory\+\_\+alloc@{memory\+\_\+alloc}}
\index{memory\+\_\+alloc@{memory\+\_\+alloc}!memory.\+h@{memory.\+h}}
\subsubsection{\texorpdfstring{memory\+\_\+alloc()}{memory\_alloc()}}
{\footnotesize\ttfamily unsigned char$\ast$ memory\+\_\+alloc (\begin{DoxyParamCaption}\item[{int}]{amount }\end{DoxyParamCaption})}



Allocate using stdlib. 

\begin{DoxyReturn}{Returns}
A pointer to the region on success, or 0 on failure 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em amount} & The amount to allocate in bytes \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{memory_8h_ae7cde6d85e696f5c9d40ad95c644669f}\label{memory_8h_ae7cde6d85e696f5c9d40ad95c644669f}} 
\index{memory.\+h@{memory.\+h}!memory\+\_\+free@{memory\+\_\+free}}
\index{memory\+\_\+free@{memory\+\_\+free}!memory.\+h@{memory.\+h}}
\subsubsection{\texorpdfstring{memory\+\_\+free()}{memory\_free()}}
{\footnotesize\ttfamily void memory\+\_\+free (\begin{DoxyParamCaption}\item[{void $\ast$}]{record }\end{DoxyParamCaption})}



Free a region allocated using \mbox{\hyperlink{memory_8h_a8636b9008fa5840103c6ddf168c5dd61}{memory\+\_\+alloc()}} 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em record} & A pointer to the region that was allocated using \mbox{\hyperlink{memory_8h_a8636b9008fa5840103c6ddf168c5dd61}{memory\+\_\+alloc()}} \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{memory_8h_ae6b607822bb47c0cfb4e3cc697265f14}\label{memory_8h_ae6b607822bb47c0cfb4e3cc697265f14}} 
\index{memory.\+h@{memory.\+h}!memory\+\_\+page\+\_\+alloc@{memory\+\_\+page\+\_\+alloc}}
\index{memory\+\_\+page\+\_\+alloc@{memory\+\_\+page\+\_\+alloc}!memory.\+h@{memory.\+h}}
\subsubsection{\texorpdfstring{memory\+\_\+page\+\_\+alloc()}{memory\_page\_alloc()}}
{\footnotesize\ttfamily unsigned char$\ast$ memory\+\_\+page\+\_\+alloc (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structmain__context}{main\+\_\+context}} $\ast$}]{main\+\_\+context,  }\item[{int}]{page\+\_\+count }\end{DoxyParamCaption})}



Allocate a number of system pages using mmap() 

If {\itshape page\+\_\+count} is $<$= 0, this method will fail.

The size of the allocated region, in bytes, will be \mbox{\hyperlink{structmain__context_a1ab3cd13dba2f0d8ec3fec11c9f967cd}{main\+\_\+context.\+system\+\_\+page\+\_\+size}} $\ast$ {\itshape page\+\_\+count} 

\begin{DoxyReturn}{Returns}
A pointer to the allocted region on success, or 0 on failure 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \mbox{\hyperlink{structmain__context}{main\+\_\+context}}} & The main context \\
\hline
\mbox{\tt in}  & {\em page\+\_\+count} & The number of pages to allocate \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{memory_8h_a68b9fe986777bee97ccfe01a7e421060}\label{memory_8h_a68b9fe986777bee97ccfe01a7e421060}} 
\index{memory.\+h@{memory.\+h}!memory\+\_\+page\+\_\+free@{memory\+\_\+page\+\_\+free}}
\index{memory\+\_\+page\+\_\+free@{memory\+\_\+page\+\_\+free}!memory.\+h@{memory.\+h}}
\subsubsection{\texorpdfstring{memory\+\_\+page\+\_\+free()}{memory\_page\_free()}}
{\footnotesize\ttfamily int memory\+\_\+page\+\_\+free (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structmain__context}{main\+\_\+context}} $\ast$}]{main\+\_\+context,  }\item[{unsigned char $\ast$}]{region,  }\item[{int}]{page\+\_\+count }\end{DoxyParamCaption})}



Free a region allocated by \mbox{\hyperlink{memory_8h_ae6b607822bb47c0cfb4e3cc697265f14}{memory\+\_\+page\+\_\+alloc()}} 

Uses munmap()

\begin{DoxyReturn}{Returns}
1 on success, or 0 on failure 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \mbox{\hyperlink{structmain__context}{main\+\_\+context}}} & The main context \\
\hline
\mbox{\tt in}  & {\em region} & A pointer to the start of the region to free \\
\hline
\mbox{\tt in}  & {\em page\+\_\+count} & The number of pages that were allocated to the region \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{memory_8h_afa7555fcfe64372a37875ffb68d418c8}\label{memory_8h_afa7555fcfe64372a37875ffb68d418c8}} 
\index{memory.\+h@{memory.\+h}!memory\+\_\+page\+\_\+realloc@{memory\+\_\+page\+\_\+realloc}}
\index{memory\+\_\+page\+\_\+realloc@{memory\+\_\+page\+\_\+realloc}!memory.\+h@{memory.\+h}}
\subsubsection{\texorpdfstring{memory\+\_\+page\+\_\+realloc()}{memory\_page\_realloc()}}
{\footnotesize\ttfamily unsigned char$\ast$ memory\+\_\+page\+\_\+realloc (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structmain__context}{main\+\_\+context}} $\ast$}]{main\+\_\+context,  }\item[{unsigned char $\ast$}]{offset,  }\item[{int}]{old\+\_\+page\+\_\+count,  }\item[{int}]{page\+\_\+count }\end{DoxyParamCaption})}



Reallocate a region allocated by \mbox{\hyperlink{memory_8h_ae6b607822bb47c0cfb4e3cc697265f14}{memory\+\_\+page\+\_\+alloc()}} 

Uses mremap() on non-\/\+B\+S\+D/\+Apple systems, otherwise just munmap() and mmap().

{\bfseries N\+O\+TE\+:} Expect the re-\/allocated region to start at a different address in memory than {\itshape offset} 

\begin{DoxyReturn}{Returns}
A pointer to the re-\/allocated region on success, or 0 on failure 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \mbox{\hyperlink{structmain__context}{main\+\_\+context}}} & The main context \\
\hline
\mbox{\tt in}  & {\em offset} & A pointer to the start of the region to reallocate \\
\hline
\mbox{\tt in}  & {\em old\+\_\+page\+\_\+count} & The old page count \\
\hline
\mbox{\tt in}  & {\em page\+\_\+count} & The new page count \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{memory_8h_a25d3abaea079ae74d3b8d19da56a30a5}\label{memory_8h_a25d3abaea079ae74d3b8d19da56a30a5}} 
\index{memory.\+h@{memory.\+h}!memory\+\_\+realloc@{memory\+\_\+realloc}}
\index{memory\+\_\+realloc@{memory\+\_\+realloc}!memory.\+h@{memory.\+h}}
\subsubsection{\texorpdfstring{memory\+\_\+realloc()}{memory\_realloc()}}
{\footnotesize\ttfamily unsigned char$\ast$ memory\+\_\+realloc (\begin{DoxyParamCaption}\item[{void $\ast$}]{region,  }\item[{int}]{old\+\_\+amount,  }\item[{int}]{new\+\_\+amount }\end{DoxyParamCaption})}



Reallocate a region allocated using \mbox{\hyperlink{memory_8h_a8636b9008fa5840103c6ddf168c5dd61}{memory\+\_\+alloc()}} 

If {\itshape new\+\_\+amount} is greater than {\itshape old\+\_\+amount}, this method will initialize the bytes that are added to 0 by using memset().

\begin{DoxyReturn}{Returns}
A pointer to the re-\/allocated region on success, or 0 on failure 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em region} & A pointer to the region that was allocated using \mbox{\hyperlink{memory_8h_a8636b9008fa5840103c6ddf168c5dd61}{memory\+\_\+alloc()}} \\
\hline
\mbox{\tt in}  & {\em old\+\_\+amount} & The current size of the region in bytes \\
\hline
\mbox{\tt in}  & {\em new\+\_\+amount} & The size that the region should change to in bytes \\
\hline
\end{DoxyParams}
