\hypertarget{database_8h}{}\section{database.\+h File Reference}
\label{database_8h}\index{database.\+h@{database.\+h}}


Method definitions for working with the database and associated records.  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
char \mbox{\hyperlink{database_8h_ad2eddf1c14edf1009db7db3bd9d20181}{database\+\_\+ptbl\+\_\+get}} (\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$ctx\+\_\+main, \mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$rec\+\_\+database, int bucket)
\begin{DoxyCompactList}\small\item\em Returns an index into the \mbox{\hyperlink{structdatabase__record_a3540e935aa7806458a5d2b9d8a145234}{database\+\_\+record.\+ptbl\+\_\+record\+\_\+tbl}} for the corresponding {\itshape bucket}, or -\/1 if no such record exists yet. \end{DoxyCompactList}\item 
unsigned char $\ast$ \mbox{\hyperlink{database_8h_aba1f7384e36e737aa5858480b6776351}{database\+\_\+ptbl\+\_\+alloc}} (\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$ctx\+\_\+main, \mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$rec\+\_\+database, char $\ast$ptbl\+\_\+index, int page\+\_\+count, int bucket)
\begin{DoxyCompactList}\small\item\em Returns a pointer to the newly allocated region, of size \mbox{\hyperlink{structmain__context_a1ab3cd13dba2f0d8ec3fec11c9f967cd}{main\+\_\+context.\+system\+\_\+page\+\_\+size}} $\ast$ {\itshape bucket}, on success, or 0 on failure. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{database_8h_abf9341a7b584b65cf544d575b6deab64}{database\+\_\+ptbl\+\_\+free}} (\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$ctx\+\_\+main, \mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$rec\+\_\+database)
\begin{DoxyCompactList}\small\item\em Frees all the structures nested within {\itshape rec\+\_\+database} and it\textquotesingle{}s sub-\/structures. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{database_8h_ab8137972a79e5fa386676dbfe7df1d72}{database\+\_\+kv\+\_\+free}} (\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$ctx\+\_\+main, \mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$rec\+\_\+database, unsigned long k)
\begin{DoxyCompactList}\small\item\em Frees a single key {\itshape k} in {\itshape rec\+\_\+database}. \end{DoxyCompactList}\item 
unsigned long \mbox{\hyperlink{database_8h_aed2bcb24ef4ace9cd0bc3e97193e75f4}{database\+\_\+kv\+\_\+alloc}} (\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$ctx\+\_\+main, \mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$rec\+\_\+database, unsigned char flags, unsigned long size, unsigned char $\ast$buffer)
\begin{DoxyCompactList}\small\item\em returns the key of a newly allocated record in rec\+\_\+database \mbox{\hyperlink{structdatabase__record_a9ba415b161d5661701689f00745d9f19}{database\+\_\+record.\+kv\+\_\+record\+\_\+tbl}} that has been initialized with {\itshape size} bytes from {\itshape buffer} on success, or 0 on failure. \end{DoxyCompactList}\item 
unsigned long \mbox{\hyperlink{database_8h_a31c221f862d21b7267e4d05bc0010c1d}{\+\_\+database\+\_\+value\+\_\+alloc}} (\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$ctx\+\_\+main, \mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$rec\+\_\+database, char $\ast$ptbl\+\_\+index, char bucket)
\begin{DoxyCompactList}\small\item\em Internal method used to allocate a single value within a {\itshape bucket}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{database_8h_a914acfcc04a5d633f8c303d0a5e9df07}{database\+\_\+kv\+\_\+set\+\_\+value}} (\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$ctx\+\_\+main, \mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$rec\+\_\+database, unsigned long k, unsigned long length, unsigned char $\ast$buffer)
\begin{DoxyCompactList}\small\item\em Given an existing key {\itshape k}, sets the value of said key to a value of {\itshape length} bytes taken from buffer. \end{DoxyCompactList}\item 
unsigned char $\ast$ \mbox{\hyperlink{database_8h_adf877c78fdd3da1640ad75c96b4a7bac}{database\+\_\+kv\+\_\+get\+\_\+value}} (\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$ctx\+\_\+main, \mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$rec\+\_\+database, char $\ast$ptbl\+\_\+index, unsigned long k)
\begin{DoxyCompactList}\small\item\em Attempts to resolve the index of the \mbox{\hyperlink{structkv__record}{kv\+\_\+record}} specified by {\itshape k} to the region which the value component resides at in memory. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{database_8h_aea3bff28a9701346e5c96430ce562011}{database\+\_\+calc\+\_\+bucket}} (unsigned long length)
\begin{DoxyCompactList}\small\item\em Given the {\itshape length} of a value in bytes, returns the corresponding bucket for that value. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Method definitions for working with the database and associated records. 



\subsection{Function Documentation}
\mbox{\Hypertarget{database_8h_a31c221f862d21b7267e4d05bc0010c1d}\label{database_8h_a31c221f862d21b7267e4d05bc0010c1d}} 
\index{database.\+h@{database.\+h}!\+\_\+database\+\_\+value\+\_\+alloc@{\+\_\+database\+\_\+value\+\_\+alloc}}
\index{\+\_\+database\+\_\+value\+\_\+alloc@{\+\_\+database\+\_\+value\+\_\+alloc}!database.\+h@{database.\+h}}
\subsubsection{\texorpdfstring{\+\_\+database\+\_\+value\+\_\+alloc()}{\_database\_value\_alloc()}}
{\footnotesize\ttfamily unsigned long \+\_\+database\+\_\+value\+\_\+alloc (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$}]{ctx\+\_\+main,  }\item[{\mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$}]{rec\+\_\+database,  }\item[{char $\ast$}]{ptbl\+\_\+index,  }\item[{char}]{bucket }\end{DoxyParamCaption})}



Internal method used to allocate a single value within a {\itshape bucket}. 

This is an {\bfseries internal} method, meaning it should {\bfseries not} be used by any methods outside of \mbox{\hyperlink{database_8h}{database.\+h}}

Optionally, a pointer to char can be specified, to which the index to the \mbox{\hyperlink{structptbl__record}{ptbl\+\_\+record}} for the corresponding {\itshape bucket} of the \mbox{\hyperlink{structdatabase__record_a3540e935aa7806458a5d2b9d8a145234}{database\+\_\+record.\+ptbl\+\_\+record\+\_\+tbl}} will be written.

\begin{DoxyReturn}{Returns}
The index into the {\itshape bucket} (\mbox{\hyperlink{structptbl__record}{ptbl\+\_\+record}}) where the value is found on success, or a -\/1 on failure 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{structkv__record_aa6e3c994316398afea8be6a05094f5b0}{kv\+\_\+record.\+bucket\+\_\+and\+\_\+index}} 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ctx\+\_\+main} & main context \\
\hline
\mbox{\tt in}  & {\em rec\+\_\+database} & database record \\
\hline
\mbox{\tt out}  & {\em ptbl\+\_\+index} & Where the index to the found \mbox{\hyperlink{structptbl__record}{ptbl\+\_\+record}} should be written \\
\hline
\mbox{\tt in}  & {\em bucket} & bucket to allocate in \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{database_8h_aea3bff28a9701346e5c96430ce562011}\label{database_8h_aea3bff28a9701346e5c96430ce562011}} 
\index{database.\+h@{database.\+h}!database\+\_\+calc\+\_\+bucket@{database\+\_\+calc\+\_\+bucket}}
\index{database\+\_\+calc\+\_\+bucket@{database\+\_\+calc\+\_\+bucket}!database.\+h@{database.\+h}}
\subsubsection{\texorpdfstring{database\+\_\+calc\+\_\+bucket()}{database\_calc\_bucket()}}
{\footnotesize\ttfamily int database\+\_\+calc\+\_\+bucket (\begin{DoxyParamCaption}\item[{unsigned long}]{length }\end{DoxyParamCaption})}



Given the {\itshape length} of a value in bytes, returns the corresponding bucket for that value. 

\begin{DoxyReturn}{Returns}
A bucket that contains values of an equivalent size 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{records_8h_ab49380468cb45feb3cc044c7337b5e7c}{P\+T\+B\+L\+\_\+\+C\+A\+L\+C\+\_\+\+B\+U\+C\+K\+E\+T\+\_\+\+W\+O\+R\+D\+\_\+\+S\+I\+Z\+E()}} 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em length} & length of a value in bytes \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{database_8h_aed2bcb24ef4ace9cd0bc3e97193e75f4}\label{database_8h_aed2bcb24ef4ace9cd0bc3e97193e75f4}} 
\index{database.\+h@{database.\+h}!database\+\_\+kv\+\_\+alloc@{database\+\_\+kv\+\_\+alloc}}
\index{database\+\_\+kv\+\_\+alloc@{database\+\_\+kv\+\_\+alloc}!database.\+h@{database.\+h}}
\subsubsection{\texorpdfstring{database\+\_\+kv\+\_\+alloc()}{database\_kv\_alloc()}}
{\footnotesize\ttfamily unsigned long database\+\_\+kv\+\_\+alloc (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$}]{ctx\+\_\+main,  }\item[{\mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$}]{rec\+\_\+database,  }\item[{unsigned char}]{flags,  }\item[{unsigned long}]{size,  }\item[{unsigned char $\ast$}]{buffer }\end{DoxyParamCaption})}



returns the key of a newly allocated record in rec\+\_\+database \mbox{\hyperlink{structdatabase__record_a9ba415b161d5661701689f00745d9f19}{database\+\_\+record.\+kv\+\_\+record\+\_\+tbl}} that has been initialized with {\itshape size} bytes from {\itshape buffer} on success, or 0 on failure. 

\begin{DoxyReturn}{Returns}
The key of a new record in rec\+\_\+database.\+kv\+\_\+record\+\_\+tbl on success, or -\/1 on failure. 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{database_8h_ab8137972a79e5fa386676dbfe7df1d72}{database\+\_\+kv\+\_\+free()}} 

\mbox{\hyperlink{structkv__record_aa6e3c994316398afea8be6a05094f5b0}{kv\+\_\+record.\+bucket\+\_\+and\+\_\+index}} 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ctx\+\_\+main} & main context \\
\hline
\mbox{\tt in}  & {\em rec\+\_\+database} & database record \\
\hline
\mbox{\tt in}  & {\em flags} & Flags to set \mbox{\hyperlink{structkv__record_aeb53c0b3c86b47eaddb5ad8b83f6ed69}{kv\+\_\+record.\+flags\+\_\+and\+\_\+size}} \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{records_8h_a9e4e6c1a697e44bdc2a2f12dbbae4aaf}{K\+V\+\_\+\+R\+E\+C\+O\+R\+D\+\_\+\+G\+E\+T\+\_\+\+F\+L\+A\+G\+S()}} 

\mbox{\hyperlink{records_8h_a5202e03977dd0331402ecccf11df1646}{K\+V\+\_\+\+R\+E\+C\+O\+R\+D\+\_\+\+S\+E\+T\+\_\+\+F\+L\+A\+G\+S()}} 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em size} & number of bytes to read from buffer, in addition to the size to set in \mbox{\hyperlink{structkv__record_aeb53c0b3c86b47eaddb5ad8b83f6ed69}{kv\+\_\+record.\+flags\+\_\+and\+\_\+size}} \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{records_8h_a6c57183858046577704315da0c646e17}{K\+V\+\_\+\+R\+E\+C\+O\+R\+D\+\_\+\+G\+E\+T\+\_\+\+S\+I\+Z\+E()}} 

\mbox{\hyperlink{records_8h_a422fd63a07942a1af4d47c76b34857c9}{K\+V\+\_\+\+R\+E\+C\+O\+R\+D\+\_\+\+S\+E\+T\+\_\+\+S\+I\+Z\+E()}} 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em buffer} & buffer to read {\itshape size} bytes into the newly allocated value in \mbox{\hyperlink{structdatabase__record_a9ba415b161d5661701689f00745d9f19}{database\+\_\+record.\+kv\+\_\+record\+\_\+tbl}} from \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{database_8h_ab8137972a79e5fa386676dbfe7df1d72}\label{database_8h_ab8137972a79e5fa386676dbfe7df1d72}} 
\index{database.\+h@{database.\+h}!database\+\_\+kv\+\_\+free@{database\+\_\+kv\+\_\+free}}
\index{database\+\_\+kv\+\_\+free@{database\+\_\+kv\+\_\+free}!database.\+h@{database.\+h}}
\subsubsection{\texorpdfstring{database\+\_\+kv\+\_\+free()}{database\_kv\_free()}}
{\footnotesize\ttfamily int database\+\_\+kv\+\_\+free (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$}]{ctx\+\_\+main,  }\item[{\mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$}]{rec\+\_\+database,  }\item[{unsigned long}]{k }\end{DoxyParamCaption})}



Frees a single key {\itshape k} in {\itshape rec\+\_\+database}. 

\begin{DoxyReturn}{Returns}
1 on success, 0 on failure 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{database_8h_aed2bcb24ef4ace9cd0bc3e97193e75f4}{database\+\_\+kv\+\_\+alloc()}} 

\mbox{\hyperlink{structkv__record}{kv\+\_\+record}} 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ctx\+\_\+main} & main context \\
\hline
\mbox{\tt in}  & {\em rec\+\_\+database} & database record \\
\hline
\mbox{\tt in}  & {\em k} & key of the \mbox{\hyperlink{structkv__record}{kv\+\_\+record}} to free \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{database_8h_adf877c78fdd3da1640ad75c96b4a7bac}\label{database_8h_adf877c78fdd3da1640ad75c96b4a7bac}} 
\index{database.\+h@{database.\+h}!database\+\_\+kv\+\_\+get\+\_\+value@{database\+\_\+kv\+\_\+get\+\_\+value}}
\index{database\+\_\+kv\+\_\+get\+\_\+value@{database\+\_\+kv\+\_\+get\+\_\+value}!database.\+h@{database.\+h}}
\subsubsection{\texorpdfstring{database\+\_\+kv\+\_\+get\+\_\+value()}{database\_kv\_get\_value()}}
{\footnotesize\ttfamily unsigned char$\ast$ database\+\_\+kv\+\_\+get\+\_\+value (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$}]{ctx\+\_\+main,  }\item[{\mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$}]{rec\+\_\+database,  }\item[{char $\ast$}]{ptbl\+\_\+index,  }\item[{unsigned long}]{k }\end{DoxyParamCaption})}



Attempts to resolve the index of the \mbox{\hyperlink{structkv__record}{kv\+\_\+record}} specified by {\itshape k} to the region which the value component resides at in memory. 

Optionally, a pointer to a char can be specified, to which the index of the \mbox{\hyperlink{structptbl__record}{ptbl\+\_\+record}} for the bucket where key {\itshape k} resides will be written.

{\bfseries N\+O\+TE\+:} Do {\bfseries not} directly write to the region of memory that is returned by this function. Use \mbox{\hyperlink{database_8h_a914acfcc04a5d633f8c303d0a5e9df07}{database\+\_\+kv\+\_\+set\+\_\+value()}} instead. How would you feel if you were trying to read some data, when some jackass comes along and overwrites it, leaving you with partially-\/written data?

\begin{DoxyReturn}{Returns}
A pointer to the value corresponding to the \mbox{\hyperlink{structkv__record}{kv\+\_\+record}} identified by {\itshape k} on success, or a 0 on failure 
\end{DoxyReturn}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ctx\+\_\+main} & main context \\
\hline
\mbox{\tt in}  & {\em rec\+\_\+database} & database record \\
\hline
\mbox{\tt out}  & {\em ptbl\+\_\+index} & Where the index of the found \mbox{\hyperlink{structptbl__record}{ptbl\+\_\+record}} should be written \\
\hline
\mbox{\tt in}  & {\em k} & key to resolve the value\textquotesingle{}s offset in memory for \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{database_8h_a914acfcc04a5d633f8c303d0a5e9df07}\label{database_8h_a914acfcc04a5d633f8c303d0a5e9df07}} 
\index{database.\+h@{database.\+h}!database\+\_\+kv\+\_\+set\+\_\+value@{database\+\_\+kv\+\_\+set\+\_\+value}}
\index{database\+\_\+kv\+\_\+set\+\_\+value@{database\+\_\+kv\+\_\+set\+\_\+value}!database.\+h@{database.\+h}}
\subsubsection{\texorpdfstring{database\+\_\+kv\+\_\+set\+\_\+value()}{database\_kv\_set\_value()}}
{\footnotesize\ttfamily int database\+\_\+kv\+\_\+set\+\_\+value (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$}]{ctx\+\_\+main,  }\item[{\mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$}]{rec\+\_\+database,  }\item[{unsigned long}]{k,  }\item[{unsigned long}]{length,  }\item[{unsigned char $\ast$}]{buffer }\end{DoxyParamCaption})}



Given an existing key {\itshape k}, sets the value of said key to a value of {\itshape length} bytes taken from buffer. 

\begin{DoxyReturn}{Returns}
1 on success, 0 on failure 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{database_8h_adf877c78fdd3da1640ad75c96b4a7bac}{database\+\_\+kv\+\_\+get\+\_\+value()}} 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ctx\+\_\+main} & main context \\
\hline
\mbox{\tt in}  & {\em rec\+\_\+database} & database record \\
\hline
\mbox{\tt in}  & {\em k} & key to return the \mbox{\hyperlink{structkv__record}{kv\+\_\+record}} for \\
\hline
\mbox{\tt in}  & {\em length} & length of buffer in bytes \\
\hline
\mbox{\tt in}  & {\em buffer} & New data to set the value to \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{database_8h_aba1f7384e36e737aa5858480b6776351}\label{database_8h_aba1f7384e36e737aa5858480b6776351}} 
\index{database.\+h@{database.\+h}!database\+\_\+ptbl\+\_\+alloc@{database\+\_\+ptbl\+\_\+alloc}}
\index{database\+\_\+ptbl\+\_\+alloc@{database\+\_\+ptbl\+\_\+alloc}!database.\+h@{database.\+h}}
\subsubsection{\texorpdfstring{database\+\_\+ptbl\+\_\+alloc()}{database\_ptbl\_alloc()}}
{\footnotesize\ttfamily unsigned char$\ast$ database\+\_\+ptbl\+\_\+alloc (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$}]{ctx\+\_\+main,  }\item[{\mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$}]{rec\+\_\+database,  }\item[{char $\ast$}]{ptbl\+\_\+index,  }\item[{int}]{page\+\_\+count,  }\item[{int}]{bucket }\end{DoxyParamCaption})}



Returns a pointer to the newly allocated region, of size \mbox{\hyperlink{structmain__context_a1ab3cd13dba2f0d8ec3fec11c9f967cd}{main\+\_\+context.\+system\+\_\+page\+\_\+size}} $\ast$ {\itshape bucket}, on success, or 0 on failure. 

Optionally, a pointer to a char can be specified, to which the index for the \mbox{\hyperlink{structptbl__record}{ptbl\+\_\+record}} for the corresponding {\itshape bucket} of the \mbox{\hyperlink{structdatabase__record}{database\+\_\+record}} will be written.

The reason it\textquotesingle{}s a {\bfseries char} is because the maximum bucket number is 63. Obviously we don\textquotesingle{}t need a lot of bits to represent that, actually we don\textquotesingle{}t even need a full 8. \+:)

\begin{DoxyReturn}{Returns}
Pointer to a region of allocated memory on success, 0 on failure. 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{database_8h_abf9341a7b584b65cf544d575b6deab64}{database\+\_\+ptbl\+\_\+free()}} 

\mbox{\hyperlink{structptbl__record}{ptbl\+\_\+record}} 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ctx\+\_\+main} & main context \\
\hline
\mbox{\tt in}  & {\em rec\+\_\+database} & database record \\
\hline
\mbox{\tt out}  & {\em ptbl\+\_\+index} & Where an index to the found \mbox{\hyperlink{structptbl__record}{ptbl\+\_\+record}} should be written \\
\hline
\mbox{\tt in}  & {\em page\+\_\+count} & number of pages to allocate \\
\hline
\mbox{\tt in}  & {\em bucket} & bucket to allocate in \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{database_8h_abf9341a7b584b65cf544d575b6deab64}\label{database_8h_abf9341a7b584b65cf544d575b6deab64}} 
\index{database.\+h@{database.\+h}!database\+\_\+ptbl\+\_\+free@{database\+\_\+ptbl\+\_\+free}}
\index{database\+\_\+ptbl\+\_\+free@{database\+\_\+ptbl\+\_\+free}!database.\+h@{database.\+h}}
\subsubsection{\texorpdfstring{database\+\_\+ptbl\+\_\+free()}{database\_ptbl\_free()}}
{\footnotesize\ttfamily void database\+\_\+ptbl\+\_\+free (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$}]{ctx\+\_\+main,  }\item[{\mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$}]{rec\+\_\+database }\end{DoxyParamCaption})}



Frees all the structures nested within {\itshape rec\+\_\+database} and it\textquotesingle{}s sub-\/structures. 

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{database_8h_aba1f7384e36e737aa5858480b6776351}{database\+\_\+ptbl\+\_\+alloc()}} 

\mbox{\hyperlink{structptbl__record}{ptbl\+\_\+record}} 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ctx\+\_\+main} & main context \\
\hline
\mbox{\tt in}  & {\em rec\+\_\+database} & database record \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{database_8h_ad2eddf1c14edf1009db7db3bd9d20181}\label{database_8h_ad2eddf1c14edf1009db7db3bd9d20181}} 
\index{database.\+h@{database.\+h}!database\+\_\+ptbl\+\_\+get@{database\+\_\+ptbl\+\_\+get}}
\index{database\+\_\+ptbl\+\_\+get@{database\+\_\+ptbl\+\_\+get}!database.\+h@{database.\+h}}
\subsubsection{\texorpdfstring{database\+\_\+ptbl\+\_\+get()}{database\_ptbl\_get()}}
{\footnotesize\ttfamily char database\+\_\+ptbl\+\_\+get (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{context_8h_a6769b7c56d4fa4864da5611ab3079613}{Context\+\_\+main}} $\ast$}]{ctx\+\_\+main,  }\item[{\mbox{\hyperlink{records_8h_a118c356dd22b00a42d98dd7fde83d565}{Record\+\_\+database}} $\ast$}]{rec\+\_\+database,  }\item[{int}]{bucket }\end{DoxyParamCaption})}



Returns an index into the \mbox{\hyperlink{structdatabase__record_a3540e935aa7806458a5d2b9d8a145234}{database\+\_\+record.\+ptbl\+\_\+record\+\_\+tbl}} for the corresponding {\itshape bucket}, or -\/1 if no such record exists yet. 

\begin{DoxyReturn}{Returns}
Index into the record table on success, 0 on failure 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{structptbl__record}{ptbl\+\_\+record}} 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ctx\+\_\+main} & main context \\
\hline
\mbox{\tt in}  & {\em rec\+\_\+database} & database record \\
\hline
\mbox{\tt in}  & {\em bucket} & Bucket number \\
\hline
\end{DoxyParams}
